<div class="wrapper">
  <!-- Left -->
  <div class="left">
    <button
      (click)="onPrev()"
      tuiIconButton
      shape="rounded"
      icon="tuiIconChevronLeftLarge"
    ></button>
    <button
      (click)="onNext()"
      tuiIconButton
      shape="rounded"
      icon="tuiIconChevronRightLarge"
      class="ml"
    ></button>

    <tui-hosted-dropdown [(open)]="openSelectMonth" [content]="monthDropdown">
      <button
        *ngrxLet="dateRange$ as dateRange"
        [class.rotate]="openSelectMonth"
        tuiButton
        iconRight="tuiIconChevronDown"
        class="ml"
      >
        {{ dateRange }}
      </button>
    </tui-hosted-dropdown>

    <ng-container
      *tssPermission="permissionConstant.SEE_DEPARTMENT_EXAM_SCHEDULE"
    >
      <div [@fadeIn] class="divider"></div>
      <tui-hosted-dropdown
        [(open)]="openFilter"
        [content]="filterDropdown"
        (openChange)="onFilterOpenChange($event)"
        [@fadeIn]
      >
        <button
          *ngrxLet="filter$ as filter"
          [class.active]="filter.showDepartmentSchedule"
          tuiButton
          icon="tuiIconFilter"
        >
          Bộ lọc: Lịch
          {{ filter.showDepartmentSchedule ? "bộ môn" : "cá nhân" }}
        </button>
      </tui-hosted-dropdown>
    </ng-container>
  </div>

  <!-- Right -->
  <div class="right" *ngrxLet="view$ as view">
    <button
      *ngrxLet="activeToday$ as activeToday"
      tuiButton
      [class.active]="activeToday"
      (click)="clickToday$.next()"
    >
      HÔM NAY
    </button>
    <div class="divider"></div>
    <button
      tuiButton
      [class.active]="view === 'Month'"
      (click)="onClickMonth()"
    >
      THÁNG
    </button>
    <button
      tuiButton
      [class.active]="view === 'Week'"
      (click)="onClickWeek()"
      class="ml"
    >
      TUẦN
    </button>

    <button
      tuiButton
      [class.active]="view === 'Day'"
      (click)="onClickDay()"
      class="ml"
    >
      NGÀY
    </button>
  </div>
</div>

<!-- Month-picker dropdown -->
<ng-template #monthDropdown>
  <tui-calendar-month
    *ngrxLet="month$ as month"
    [value]="month"
    [year]="month"
    (monthClick)="onSelectMonth($event)"
  ></tui-calendar-month>
</ng-template>

<!-- Filter dropdown -->
<ng-template #filterDropdown>
  <form [formGroup]="filterForm" (ngSubmit)="filter()">
    <div class="d-flex">
      <tui-radio-labeled
        formControlName="showDepartmentSchedule"
        class="tui-space_bottom-3"
        [item]="false"
      >
        Cá nhân
      </tui-radio-labeled>
      <tui-radio-labeled
        formControlName="showDepartmentSchedule"
        class="tui-space_bottom-3"
        [item]="true"
      >
        Bộ môn
      </tui-radio-labeled>
    </div>
    <div class="d-flex flex-end">
      <button tuiButton appearance="primary" size="xs" type="submit">
        Lọc
      </button>
    </div>
  </form>
</ng-template>
