<div class="wrapper d-flex">
  <div
    *ngrxLet="options$ as options"
    tuiTextfieldSize="s"
    class="left d-flex align-items-center flex-wrap"
  >
    <tui-select
      (ngModelChange)="changeOptions({ status: $event })"
      [ngModel]="options.status"
      [valueContent]="selectTemplate"
    >
      Trạng thái
      <ng-template tuiDataList>
        <tui-data-list>
          <tui-opt-group>
            <button tuiOption [value]="null" size="xs">Tất cả</button>
          </tui-opt-group>
          <tui-opt-group tuiMultiSelectGroup>
            <ng-container *ngFor="let status of statusArray">
              <ng-container *ngIf="!status.value.hide">
                <button
                  tuiOption
                  *tssPermission="status.value.feature"
                  [value]="status.id"
                  size="xs"
                >
                  {{ status.value.name }}
                </button>
              </ng-container>
            </ng-container>
          </tui-opt-group>
        </tui-data-list>
      </ng-template>
    </tui-select>
    <!-- <ng-container *ngIf="!personal">
    <tui-select
      *ngrxLet="data$ as data"
      [ngModel]="options.teacher"
      [valueContent]="teacherTemplate"
      (ngModelChange)="changeOptions({ teacher: $event })"
      tuiTextfieldSize="s"
    >
      Chọn giảng viên
      <ng-template tuiDataList>
        <tui-data-list>
          <tui-opt-group>
            <button tuiOption [value]="null" size="xs">Tất cả</button>
          </tui-opt-group>
          <tui-opt-group>
            <button
              *ngFor="let teacher of data.teachers"
              tuiOption
              [value]="teacher"
              size="xs"
            >
              {{ teacher.name }}
            </button>
          </tui-opt-group>
        </tui-data-list>
      </ng-template>
    </tui-select>
  </ng-container> -->
    <tui-checkbox-labeled
      [ngModel]="options.showTime"
      (ngModelChange)="changeOptions({ showTime: $event })"
    >
      Hiển thị giờ
    </tui-checkbox-labeled>
    <tui-checkbox-labeled
      *ngIf="isPersonal"
      [ngModel]="options.showReason"
      (ngModelChange)="changeOptions({ showReason: $event })"
    >
      Hiển thị lý do
    </tui-checkbox-labeled>
  </div>
  <div class="right d-flex">
    <ng-container *ngIf="isPersonal">
      <button
        *ngrxLet="exportSchedule$ as exportSchedule"
        tuiButton
        (click)="exportMultiple$.next()"
        [disabled]="exportSchedule.length === 0"
        icon="tuiIconUpload"
      >
        Xuất báo cáo {{ exportSchedule.length || "các" }} mục đã chọn
      </button>
    </ng-container>
    <button
      *ngIf="isPersonal; else statistic"
      tuiButton
      (click)="onExport()"
      icon="tuiIconUpload"
    >
      Xuất báo cáo tháng
    </button>
    <ng-template #statistic>
      <a tuiButton [routerLink]="['/statistic']">Thống kê tháng</a>
    </ng-template>
  </div>
</div>

<!-- Status templates -->
<ng-template #selectTemplate let-status>
  {{ statusList[status].name }}
</ng-template>

<!-- Teacher templates -->
<ng-template #teacherTemplate let-teacher>
  <div class="tui-text_body-s">
    {{ teacher.name }}
  </div>
</ng-template>
